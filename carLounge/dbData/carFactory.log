/*C3*/SET SCHEMA PUBLIC
drop table if exists app_user CASCADE 
drop table if exists contribution CASCADE 
drop table if exists factory_entity CASCADE 
drop table if exists trademarks CASCADE 
drop sequence hibernate_sequence if exists
create sequence hibernate_sequence start with 1 increment by 1
create table app_user (id bigint not null, password varchar(255) not null, username varchar(255) not null, primary key (id))
create table contribution (id integer not null, car_id integer not null, engineer_id integer not null, primary key (id))
create table factory_entity (dtype varchar(31) not null, id integer not null, created_on timestamp, color varchar(255), engine_size double, image varchar(64), model varchar(255), price integer, release_date date, name varchar(255), nationality varchar(255), tenure integer, author_id bigint not null, trademark_id integer, primary key (id))
create table trademarks (trademark_id integer not null, founder varchar(255), launch_year integer not null, title varchar(255), primary key (trademark_id))
alter table contribution add constraint UK160nxt2r7ufbjj19n4o6w6ypv unique (engineer_id, car_id)
alter table contribution add constraint FK4ejc8pbr4iypbplv6obq5pjit foreign key (car_id) references factory_entity
alter table contribution add constraint FKsoasievoow4u4vvl4dy381arl foreign key (engineer_id) references factory_entity
alter table factory_entity add constraint FKp8m11qxxyf594l09hpnwakgso foreign key (author_id) references app_user
alter table factory_entity add constraint FK2u51hm2qdauxyunjdua7u20jm foreign key (trademark_id) references trademarks
INSERT INTO APP_USER VALUES(1,'$2a$10$ub8V55Kei4eABgcyftwCpOz9toW9avhiUIOxl8dgY8s3OFIN6FQUG','issam')
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 2
COMMIT
INSERT INTO TRADEMARKS VALUES(2,'Karl Benz',1926,'Mercedes-Benz')
INSERT INTO FACTORY_ENTITY VALUES('Car',3,'2022-03-14 15:57:56.763761','WHITE',2.0E0,'aClass.jpg','A-Class',32500,'2019-08-31',NULL,NULL,NULL,1,2)
INSERT INTO FACTORY_ENTITY VALUES('Car',4,'2022-03-14 15:57:56.763761','CHROME',2.0E0,'cClass.jpg','C-Class',41400,'2019-12-14',NULL,NULL,NULL,1,2)
INSERT INTO TRADEMARKS VALUES(5,'Camillo Castiglioni',1916,'BMW')
INSERT INTO TRADEMARKS VALUES(6,'August Horch',1909,'Audi')
INSERT INTO TRADEMARKS VALUES(7,'German Labour Front',1937,'Volkswagen')
INSERT INTO TRADEMARKS VALUES(8,'AKiichiro Toyoda',1937,'Toyota')
INSERT INTO TRADEMARKS VALUES(9,'Henry Ford',1903,'Ford')
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 10
COMMIT
INSERT INTO FACTORY_ENTITY VALUES('Engineer',10,'2022-03-14 15:57:56.763761',NULL,NULL,NULL,NULL,NULL,NULL,'Frank Lamberty','German',18,1,NULL)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 11
COMMIT
INSERT INTO CONTRIBUTION VALUES(11,3,10)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 12
COMMIT
